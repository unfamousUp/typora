# 六七月系统开发工作汇报

基于新学习的技术栈，对整体的系统架构进行了重构。

日期：[2023] [7月 - 8月]

项目名称：[互联网执法系统]

开发人员：[陈久佳]

## 一、前后端

在本月期间，我主要负责基于Spring Boot和Vue的前后端分离系统的开发工作。通过熟练应用Spring Boot和Vue框架，成功实现了系统的核心功能。在鉴权和Token校验方面，我使用Shiro框架进行用户认证和授权，确保了系统只有具有相应权限的用户才能访问受保护的接口。同时，采用JWT作为认证机制，有效地提高了系统的安全性，并且有效地管理用户的会话状态，保障了用户信息的安全。

为了提升系统性能，我将频繁访问的数据缓存到Redis中，减少了数据库的访问次数，从而极大地提高了系统的响应速度。通过手动配置Mapper接口的XML SQL语句，我优化了数据库查询语句，避免了复杂查询，进一步提高了数据库查询效率，保障了系统的性能。

在接口开发和业务逻辑实现方面，我编写了控制层相关接口，负责前端请求的处理和响应，实现了前后端的良好交互。重写自定义的Realm并编写业务逻辑代码，我成功实现了待办、在办和办结等核心业务，保障了系统的基本功能得到实现。此外，为了提高前端用户体验，我使用Vue框架构建了友好的前端页面，并通过Axios实现了前后端数据交互，确保用户信息的安全传输。

为了加强系统的安全性，我编写了COS跨域过滤器，处理前端跨域请求，确保前端能够安全地调用后端接口。同时，配置JWT过滤器，只有携带有效的Token的请求才能访问受限资源，保障了接口的安全性，防止了未授权访问。

最后，我进行了接口文档测试，使用Knife接口文档测试功能，对后端接口进行全面的测试和验证，确保接口的正确性和稳定性。

以下是详细功能的具体实现：

1. 鉴权和Token校验：
   - 使用Shiro框架进行用户认证和授权，实现了权限控制功能。
     - 在Spring Boot项目中集成Shiro，配置Shiro的安全管理器、Realm、Session管理等组件。
     - 编写自定义的Realm实现对用户的认证和权限控制逻辑。
     - 在控制层接口方法上使用Shiro的注解进行权限控制，限制只有具有相应权限的用户可以访问受保护的接口。
   - 采用JWT作为无状态的认证机制，生成并验证Token，确保请求的合法性和安全性。
     - 在用户登录成功后，生成JWT Token，并将用户信息加密为Token的Payload部分。
     - 客户端在后续请求中携带JWT Token，并通过拦截器进行Token的校验，确保Token的合法性和有效性。
     - 使用JWT的过期时间特性，设置Token的有效期，增加系统的安全性。
2. 数据缓存和性能优化：
   - 使用Redis作为缓存数据库，对频繁访问的数据进行缓存，减少数据库访问次数，提高系统的响应速度和性能。
     - 针对经常被查询的数据，通过Redis的缓存机制将数据存储到内存中。
     - 在数据访问的逻辑中，首先尝试从Redis中获取数据，如果不存在再从数据库中查询，并将查询结果缓存到Redis中。
     - 设置合理的缓存过期时间，以确保缓存数据的及时更新。
3. 接口开发和业务逻辑实现：
   - 编写了控制层相关接口，对前端请求进行响应，实现了前后端交互。
     - 根据系统需求和设计文档，编写RESTful风格的接口，定义接口的URL、请求方法和参数。
     - 使用Spring Boot的@Controller或@RestController注解定义控制器类，处理前端请求。
   - 重写了自定义的Realm，实现了用户认证和权限控制，保障系统的安全性。
     - 自定义Realm继承Shiro的AuthorizingRealm类，重写其中的认证和授权方法。
     - 在认证方法中，根据用户输入的用户名和密码，从数据库中查询用户信息进行认证。
     - 在授权方法中，根据用户的角色和权限，判断用户是否有访问相应接口的权限。
   - 实现了待办、在办和办结等核心业务逻辑，确保系统的基本功能得到实现。
     - 根据业务需求，编写业务逻辑代码，处理待办、在办和办结等相关业务。
     - 在代码编写过程中，充分考虑系统的扩展性和灵活性，尽量避免硬编码，提高代码的可维护性。
4. 前端开发和用户体验优化：
   - 使用Vue框架构建前端页面，实现了前后端分离，提高了开发效率和可维护性。
     - 划分组件，实现页面的模块化开发，提高代码的复用性和可读性。
     - 使用Vue Router实现前端路由，实现页面的单页应用。
   - 通过Axios实现前后端数据交互，利用携带的Token进行用户身份验证。
     - 在Vue组件中使用Axios发送HTTP请求，与后端接口进行数据交互。
     - 在请求中携带JWT Token，确保用户的身份验证和接口的安全性。
   - 优化前端界面和用户交互，提升用户体验，使系统更加友好和易用。
     - 进行前端页面的美化和优化，使用CSS和JavaScript增加交互效果和动画。
     - 对用户输入进行校验，增加表单验证和错误提示，提高用户操作的友好性。
5. 安全性和跨域处理：
   - 编写了COS跨域过滤器，解决了前端跨域请求的问题，确保前端能够安全地调用后端接口。
     - 配置COS跨域过滤器，允许前端域名跨域访问后端接口。
     - 在跨域请求中增加自定义的HTTP头部，防止跨域攻击。
   - 配置了JWT过滤器，只有携带有效的Token的请求才能访问受限资源，保障接口的安全性。
     - 编写JWT过滤器，在请求到达控制器之前，对Token进行校验和解析。
     - 如果Token无效或过期，拦截请求并返回相应的错误信息。
6. 接口文档测试：
   - 使用Knife接口文档测试功能，对后端接口进行测试和验证，保证接口的正确性和稳定性。
     - 在接口文档中详细描述每个接口的功能、请求参数、响应结果等信息。
     - 使用Knife工具进行接口的自动化测试，验证接口的正确性和稳定性。
     - 根据测试结果进行必要的接口优化和修改，确保接口的正常运行。

> 当然，开发也不是一帆风顺的，我遇到了很多困难和bug，有时一个不起眼的问题，可能需要花费一天的时间去调试。我需要去追其溯源，翻阅其源码。通过日志输出和调试工具，对系统进行详细的跟踪和定位，找出Bug的具体位置和出现原因，好在最终都成功解决了。

## 二、数据库

基于给予的真实的数据，对数据库设计进行了重构。

### 1. events

![image-20230806114747754](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230806114747754.png)

### 2.organizations

![image-20230806114857630](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230806114857630.png)

### 3. permissions

![image-20230806114926491](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230806114926491.png)

### 4. roles

![image-20230806114953743](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230806114953743.png)

### 5. role_ps

![image-20230806115031467](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230806115031467.png)

### 6. user

![image-20230806115212741](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230806115212741.png)

### 7. role_user

![image-20230806115303591](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230806115303591.png)

### 8. workflow_steps

![image-20230806115247305](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230806115247305.png)

### 9. sensitive_word_monitor

![image-20230806115328930](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230806115328930.png)

加入一个文本框