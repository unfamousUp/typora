# Spring事务

## 一、Spring事务简介

![image-20221130211346975](https://gitee.com/chen-jiujia/typora-picgo/raw/master/img/202309251742811.png)

## 二、案例

![image-20221130211612410](https://gitee.com/chen-jiujia/typora-picgo/raw/master/img/202309251742812.png)

### 1. 在业务层接口添加Spring事务管理

![image-20221130211536376](https://gitee.com/chen-jiujia/typora-picgo/raw/master/img/202309251742813.png)

### 2. 设置事务管理器

![image-20221130211432596](https://gitee.com/chen-jiujia/typora-picgo/raw/master/img/202309251742814.png)

### 3. 开启注解式事务驱动

![image-20221130211408436](https://gitee.com/chen-jiujia/typora-picgo/raw/master/img/202309251742815.png)

## 三、Spring事务角色

### 1. 事务管理员

![image-20221130212549173](https://gitee.com/chen-jiujia/typora-picgo/raw/master/img/202309251742816.png)

### 2. 事务协调员

![image-20221130212558542](https://gitee.com/chen-jiujia/typora-picgo/raw/master/img/202309251742817.png)

## 四、事务相关配置

### 1. 事务配置

![image-20221130224325735](https://gitee.com/chen-jiujia/typora-picgo/raw/master/img/202309251742818.png)

### 2. 案例：转账业务追加日志

![image-20221130224521081](https://gitee.com/chen-jiujia/typora-picgo/raw/master/img/202309251742819.png)

![image-20221130224540451](https://gitee.com/chen-jiujia/typora-picgo/raw/master/img/202309251742820.png)

### 3. 事务传播行为

![image-20221130224512796](https://gitee.com/chen-jiujia/typora-picgo/raw/master/img/202309251742821.png)